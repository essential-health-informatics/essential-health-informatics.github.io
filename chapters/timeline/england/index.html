<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>England NHS Timeline – Essentials of Health Informatics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../media/eohi-logo.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Essentials of Health Informatics</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../chapters/index.html"> 
<span class="menu-text">Chapters</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../../chapters/timeline/england/index.html" aria-current="page"> 
<span class="menu-text">UK timeline</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">England NHS Timeline</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div id="timeline" class="timeline">

    <div class="date-container">
      <div class="bubble left">
        <p class="container-header">1943</p>
        <img class="observed-image" src="../../../media/colossus-computer.jpg" alt="Colossus computer" style="width: 100%;">
        <button class="collapsible">Colossus computer</button>
        <div class="collapsible-content">
          <p>The first electronic computer. Used as a codebreaker in World War II.</p><p><a href="colossus-computer.html" target="_blank">Further details...</a></p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble right">
        <p class="container-header">1952</p>
        <img class="observed-image" src="../../../media/mcbee-punch-card.jpg" alt="Another description" style="width: 100%;">
        <button class="collapsible">First use of HIT</button>
        <div class="collapsible-content">
          <p>Dr Arthur Rappoport uses the McBee Manual Punch Card in pathology labs.</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble left">
        <p class="container-header">1950s</p>
        <img class="observed-image" src="../../../media/hand-written-table.jpg" alt="Another description" style="width: 100%;">
        <button class="collapsible">Computers first used for administrative purposes</button>
        <div class="collapsible-content">
          <p>...</p><p><a href="computers-first-used-for-administrative-purposes.html" target="_blank">Further details...</a></p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble right">
        <p class="container-header">1969</p>
        <img class="observed-image" src="../../../media/john-preece.jpg" alt="Another description" style="width: 100%;">
        <button class="collapsible">Dr John Preece and the Ottery St Mary project</button>
        <div class="collapsible-content">
          <p>...</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble left">
        <p class="container-header">1970s</p>
        <img class="observed-image" src="../../../media/emis-logo.png" alt="Another description" style="width: 100%;">
        <button class="collapsible">EMIS</button>
        <div class="collapsible-content">
          <p>A GP in the village of Egton in Yorkshire, persuaded IBM to give him a computer and a suitable programme, built a room onto his surgery to house it and created Egton Medical Information Systems (EMIS)</p><p><a href="https://www.emishealth.com/" target="_blank">Further details...</a></p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble right">
        <p class="container-header">1980s</p>
        <img class="observed-image" src="../../../media/read-codes.png" alt="Another description" style="width: 100%;">
        <button class="collapsible">Read codes</button>
        <div class="collapsible-content">
          <p>Dr Read, a GP in Leicestershire, realised a dictionary of medical diagnoses was needed for his computer system and set out to create it, initially using the death certification lists described above and started with a few thousand codes.</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble left">
        <p class="container-header">...</p>
        <img class="observed-image" src="../../../media/snomed-ct-logo.jpg" alt="Another description" style="width: 100%;">
        <button class="collapsible">SNOMED-CT</button>
        <div class="collapsible-content">
          <p>Systematized Nomenclature of Medicine Clinical Terms (SNOWMED CT)</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble right">
        <p class="container-header">1991</p>
        <img class="observed-image" src="../../../media/Tim Berners-Lee.jpg" alt="Picture of Tim Berners-Lee" style="width: 100%;">
        <button class="collapsible">World Wide Web launched</button>
        <div class="collapsible-content">
          <p>In 1989, British scientist Tim Berners-Lee created the World Wide Web (WWW) while working at CERN. His intention was to develop a system that would enable automated sharing of information among scientists across universities and research institutions globally.</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble left">
        <p class="container-header">1992</p>
        <img class="observed-image" src="../../../media/peter-drury.jpeg" alt="Picture of Peter Drury" style="width: 100%;">
        <button class="collapsible">Drury - Getting Better with Information</button>
        <div class="collapsible-content">
          <p>Information will be person-based. Information should focus on health. Systems should be integrated. Information will be derived from operational systems. Information will be secure and confidential. Information will be shared across the NHS</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble right">
        <p class="container-header">1997</p>
        <img class="observed-image" src="../../../media/fiona-caldicott.jpg" alt="Another description" style="width: 100%;">
        <button class="collapsible">Caldicott Principles of data sharing</button>
        <div class="collapsible-content">
          <p>The first 6 (2 more came later)
Principle 1: justify the purpose(s) for using confidential information.
Principle 2: use confidential information only when it is necessary.
Principle 3: use the minimum necessary confidential information.
Principle 4: access to confidential information should be on a strict need-to-know basis.
Principle 5: everyone with access to confidential information should be aware of their responsibilities.
Principle 6: comply with the law.</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble left">
        <p class="container-header">2001</p>
        <img class="observed-image" src="../../../media/derek-wanless.jpg" alt="Picture of Derek Wanless" style="width: 100%;">
        <button class="collapsible">Wanless</button>
        <div class="collapsible-content">
          <p>We have achieved less because we have spent very much less and not spent it well.</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble right">
        <p class="container-header">2002</p>
        <img class="observed-image" src="../../../media/denis-protti.jpg" alt="Another description" style="width: 100%;">
        <button class="collapsible">Protti</button>
        <div class="collapsible-content">
          <p>UK - 59% of primary care physicians
New Zealand - 52% 
USA - 17%
The original concept of the EPR being a longitudinal health record about an individual is still very valid! However, it has become entangled in organisationally bound thinking. 
A true patient-centric model is needed.</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble left">
        <p class="container-header">2002-2012</p>
        <img class="observed-image" src="../../../media/microchip-placeholder.png" alt="Another description" style="width: 100%;">
        <button class="collapsible">National Program for IT (NPfIT)</button>
        <div class="collapsible-content">
          <p>Delivering 21st Century IT Support for the NHS - paper
National Program for IT (NPfIT) starts 2002
NPfIT closes down in 2012
£12.5 billion spent (167.56 billion SEK)
Very little in terms of deliveries - mainly PACS (picture archiving and communication system)</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble right">
        <p class="container-header">2016</p>
        <img class="observed-image" src="../../../media/wachter-review.png" alt="Front cover of Wachter Review with net connectivity like structure" style="width: 100%;">
        <button class="collapsible">Wachter Review, Making IT work</button>
        <div class="collapsible-content">
          <p>10 findings, the most important:
Interoperability should be built in from the start
Health IT systems must embrace user-centred design
A successful digital strategy must be multifaceted, and requires workforce development (more to come in this afternoon’s session)
Health IT is about both technical and adaptive change</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble left">
        <p class="container-header">2017</p>
        <img class="observed-image" src="../../../media/wanna-cry.jpeg" alt="Another description" style="width: 100%;">
        <button class="collapsible">WannaCry NHS attack</button>
        <div class="collapsible-content">
          <p>A Microsoft Windows Operation System exploit.
Largest hit service was England and Scotland. Wales and Northern Ireland were not affected.
Up to 70,000 devices&nbsp;– including computers,&nbsp;MRI scanners, blood-storage refrigerators and theatre equipment&nbsp;affected.
Some NHS services had to turn away non-critical emergencies, and some ambulances were diverted.[
In 2018 a report by Members of Parliament concluded that all 200 NHS hospitals or other organisations checked in the wake of the WannaCry attack still failed cybersecurity checks.</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble right">
        <p class="container-header">2019</p>
        <img class="observed-image" src="../../../media/topol-review-hand.jpeg" alt="Another description" style="width: 100%;">
        <button class="collapsible">Topol Review</button>
        <div class="collapsible-content">
          <p>Talks about digital and genomics are the future.
The patient must be considered to be at the centre when assessing and implementing any new technologies. (I would argue staff as well)
Extensive education and training of the clinician workforce and the public, with cultivation of a cross-disciplinary approach that includes data scientists, computer scientists, engineers, bioinformaticians, in addition to the traditional mix of pharmacists, nurses and doctors.</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble left">
        <p class="container-header">2019</p>
        <img class="observed-image" src="../../../media/fci-logo.png" alt="Another description" style="width: 100%;">
        <button class="collapsible">Formation of the Faculty of Clinical Informatics</button>
        <div class="collapsible-content">
          <p>The Idea of the FCI started in the 1990s inside the Royal College of GPs Health Informatics Group (RCGP HIG)
RCGP HIG gave joint representation to the Computer Group within the British Medical Association (BMA)
Academy of Colleges Information Group (ACIG, from AoMRC) tried an initial attempt to create an FCI, but National Program for IT (NPfIT) waylay this.
Prof Maureen Baker as chair of RCGP HIG set up a steering group that gave final push to start positive steps to form the FCI – April 2017
FCI formed by founding fellows November 2017 as a “spin off” faculty from the RCGP
FCI is now an independent Charitable Incorporated Organisation - September 2019</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble right">
        <p class="container-header">...</p>
        <img class="observed-image" src="../../../media/microchip-placeholder.png" alt="Another description" style="width: 100%;">
        <button class="collapsible">Care.data</button>
        <div class="collapsible-content">
          <p>...</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble left">
        <p class="container-header">...</p>
        <img class="observed-image" src="../../../media/microchip-placeholder.png" alt="Another description" style="width: 100%;">
        <button class="collapsible">GP Data for Planning and Research (GPDPR)</button>
        <div class="collapsible-content">
          <p>...</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble right">
        <p class="container-header">2020</p>
        <img class="observed-image" src="../../../media/microchip-placeholder.png" alt="Another description" style="width: 100%;">
        <button class="collapsible">Caldicott Principles 7 &amp; 8</button>
        <div class="collapsible-content">
          <p>Principle 7: the duty to share information for individual care is as important as the duty to protect patient confidentiality.
Principle 8: inform patients and services users about how their confidential information is used and what choice they have. There should be no surprises.)</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble left">
        <p class="container-header">2022-23</p>
        <img class="observed-image" src="../../../media/microchip-placeholder.png" alt="Another description" style="width: 100%;">
        <button class="collapsible">England's NHS bodies become a single organisation</button>
        <div class="collapsible-content">
          <p>The mergence of NHS Health Education England, NHS Improvement, NHS X and the NHS Digital into NHS England.</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble right">
        <p class="container-header">2023</p>
        <img class="observed-image" src="../../../media/microchip-placeholder.png" alt="Another description" style="width: 100%;">
        <button class="collapsible">Federated Data Platform</button>
        <div class="collapsible-content">
          <p>Controlled by the NHS “to unlock the power of NHS data to understand patterns, solve problems, plan services for local populations and ultimately transform the health and care of the people they serve.” 
Mixture of use cases such as:
Direct care
Public health
Healthcare planning and research
This mixed use case has complications in English law.</p>
        </div>
      </div>
    </div>
    
    <div class="date-container">
      <div class="bubble left">
        <p class="container-header">2024</p>
        <img class="observed-image" src="../../../media/fci-logo.png" alt="Another description" style="width: 100%;">
        <button class="collapsible">Faculty of Clinical Informatics absorbed into British Computer Society</button>
        <div class="collapsible-content">
          <p>The Faculty of Clinical Informatics (FCI) has been absorbed into the British Computer Society (BCS). The FCI will continue to operate as a special interest group within the BCS.</p>
        </div>
      </div>
    </div>
    
</div>

<script type="module" src="../../../static/js/timeline-runtime.js"></script>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/essential-health-informatics\.com\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>